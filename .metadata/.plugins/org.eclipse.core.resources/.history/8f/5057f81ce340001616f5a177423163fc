package graphics;

import java.awt.BorderLayout;
import java.awt.GridLayout;
import java.awt.Insets;
import java.awt.Panel;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.util.List;

import javax.swing.JButton;
import javax.swing.JLabel;
import javax.swing.JOptionPane;
import javax.swing.JPanel;

import adapters.HighScore;
import adapters.Player;

public class TopPlayer extends JOptionPane {
	private static final long serialVersionUID = 1L;

	public static final Insets INSETS = new Insets(0, 0, 0, 0);
	public HighScore hScore = new HighScore();
	public Panel root;
	public JPanel dataPanel;

	/**
	 * Create the dialog.
	 */
	public TopPlayer() {
		root = new Panel(new BorderLayout());
		setTopPlayer();
		JButton reset = new JButton("Reset high score");
		reset.setMargin(INSETS);
		reset.addActionListener(new ActionListener() {

			@Override
			public void actionPerformed(ActionEvent e) {
				dataPanel.removeAll();
				hScore.removeAll();
				hScore.writeData();
				setTopPlayer();
				dataPanel.validate();
				dataPanel.repaint();
			}
		});
		root.add(reset, BorderLayout.SOUTH);
		showMessageDialog(this, root, "High Score", JOptionPane.PLAIN_MESSAGE);
	}

	public void setTopPlayer() {
		dataPanel = new JPanel(new GridLayout(10, 1), true);
		JLabel row;
		String line;
		List<Player> list = hScore.getListTopPlayer();
		if (list.isEmpty()) {
			line = "No data!";
			row = new JLabel(line);
			dataPanel.add(row);
		} else
			for (int i = 0; i < list.size(); i++) {
				Player player = list.get(i);
				line = (i + 1) + ". " + player.getName() + ": " + player.getScore();
				row = new JLabel(line);
				dataPanel.add(row);
			}
		root.add(dataPanel, BorderLayout.CENTER);
	}

}
